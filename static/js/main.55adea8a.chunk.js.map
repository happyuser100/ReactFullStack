{"version":3,"sources":["services/fleet-vessel-service.js","components/fleet-list/index.js","components/fleet-list/fleet-list.js","App.js","components/search-panel/index.js","components/search-panel/search-panel.js","components/vessel-list/VesselsMap.js","components/vessel-list/VesselInfo.js","components/vessel-list/index.js","components/vessel-list/vessel-list.js","index.js"],"names":["FleetVesselService","_apiBase","getResource","url","fetch","json","getFleets","fleets","getVessels","vessels","getVesselLocations","FleetList","fleetVesselService","state","loading","error","sort","field","dir","getAllFleets","then","response","onFleetsLoaded","catch","onError","finally","setState","data","err","this","Fragment","className","style","height","orderBy","sortable","onSortChange","e","title","width","cell","props","to","dataItem","Component","App","SearchPanel","termName","termMMSI","termFlag","onSearchChangeName","term","target","value","onSearchChangeMMSI","onSearchChangeFlag","search","preventDefault","criteriaName","refName","current","trim","criteriaMMSI","refMMSI","criteriaFlag","refFlag","React","createRef","htmlFor","ref","id","placeholder","onChange","type","onClick","VesselsMap","map","vessel","index","longitude","latitude","viewBox","cursor","fill","stroke","transform","d","PureComponent","VesselInfo","info","displayName","name","displayFlag","flag","displayMMSI","mmsi","VesselList","viewport","zoom","bearing","pitch","popupInfo","fleet","vesselLocations","vesselLocationsMap","searchName","searchMMSI","searchFlag","_onClickMarker","city","match","params","item","find","x","_id","getAllVessels","getFleetsById","onFleetsByIdLoaded","Fleet","onVesselsLoaded","getAllVesselLocations","onVesselLocationsLoaded","vesselLocationsByFleet","VesselLocations","vesselItem","filter","length","removeNull","getVesselLocationsMap","vesselLocationItem","lastpos","geometry","coordinates","Vessels","tipSize","anchor","closeOnClick","onClose","array","itemsGrid","chkName","toLowerCase","includes","chkMMSI","toString","chkFlag","mapStyle","onViewportChange","mapboxApiAccessToken","_renderPopup","ReactDOM","render","StrictMode","exact","path","component","document","getElementById"],"mappings":"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","file":"static/js/main.55adea8a.chunk.js","sourcesContent":["export default class FleetVesselService {\r\n  _apiBase = \"http://localhost:9000/testAPI/\";\r\n\r\n  getResource = (url) => {\r\n    const res = fetch(`${this._apiBase}${url}`);\r\n\r\n    // if (!res.ok) {\r\n    //   throw new Error(`Could not fetch ${url}, received ${res.status}`);\r\n    // }\r\n\r\n    return res.json();\r\n  };\r\n\r\n  getFleets = () => {\r\n    debugger;\r\n    const res = this.getResource(`fleets/`);\r\n    return res.fleets;\r\n  };\r\n\r\n  getVessels = () => {\r\n    const res = this.getResource(`vessels/`);\r\n    return res.vessels;\r\n  };\r\n\r\n  getVesselLocations = () => {\r\n    const res = this.getResource(`vesselLocations/`);\r\n    return res.vessels;\r\n  };\r\n}\r\n","import FleetList from \"./fleet-list\"\r\n\r\nexport default FleetList","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// import fleets from \"../../components/data/fleets.json\";\r\nimport FleetVesselService from \"./../../services/fleet-vessel-service\";\r\nimport { Grid, GridColumn as Column } from \"@progress/kendo-react-grid\";\r\nimport { orderBy } from \"@progress/kendo-data-query\";\r\n\r\nexport default class FleetList extends Component {\r\n  _apiBase = \"http://localhost:9000/testAPI/\";\r\n\r\n  fleetVesselService = new FleetVesselService();\r\n\r\n  state = {\r\n    fleets: [],\r\n    loading: true,\r\n    error: false,\r\n    sort: [\r\n      { field: \"name\", dir: \"asc\" },\r\n      { field: \"cnt\", dir: \"asc\" },\r\n    ],\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setState({ loading: true });\r\n    this.getAllFleets();\r\n  }\r\n\r\n  getAllFleets = () => {\r\n    let url = \"fleets\";\r\n    fetch(`${this._apiBase}${url}`)\r\n      .then((response) => response.json())\r\n      .then(this.onFleetsLoaded)\r\n      .catch(this.onError)\r\n      .finally(() => {\r\n        this.setState({\r\n          loading: false,\r\n        });\r\n      });\r\n  };\r\n\r\n  onFleetsLoaded = (data) => {\r\n    this.setState({\r\n      fleets: data,\r\n      loading: false,\r\n      error: false,\r\n    });\r\n  };\r\n\r\n  onError = (err) => {\r\n    this.setState({\r\n      error: true,\r\n      loading: false,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { fleets, loading, error } = this.state;\r\n\r\n    if (loading) {\r\n      return <p>Loading ...</p>;\r\n    }\r\n\r\n    const hasData = !(loading || error);\r\n    return hasData ? (\r\n      <React.Fragment>\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <h1>Fleets Page</h1>\r\n\r\n              <Grid\r\n                style={{ height: \"500px\" }}\r\n                data={orderBy(fleets, this.state.sort)}\r\n                sortable\r\n                sort={this.state.sort}\r\n                onSortChange={(e) => {\r\n                  this.setState({\r\n                    sort: e.sort,\r\n                  });\r\n                }}\r\n              >\r\n                <Column\r\n                  field=\"name\"\r\n                  title=\"Name\"\r\n                  width=\"250px\"\r\n                  cell={(props) => (\r\n                    <td>\r\n                      <Link to={`/vessels/${props.dataItem[\"_id\"]}`}>\r\n                        {props.dataItem[props.field]}\r\n                      </Link>\r\n                    </td>\r\n                  )}\r\n                />\r\n                <Column\r\n                  field=\"cnt\"\r\n                  title=\"Vessels Number\"\r\n                  width=\"200px\"\r\n                  cell={(props) => (\r\n                    <td>\r\n                      <Link to={`/vessels/${props.dataItem[\"_id\"]}`}>\r\n                        {props.dataItem[props.field]}\r\n                      </Link>\r\n                    </td>\r\n                  )}\r\n                />\r\n              </Grid>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    ) : null;\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\nimport FleetList from \"./components/fleet-list\";\nimport \"./App.css\"\n// import '@progress/kendo-theme-default/dist/all.css';\nimport '@progress/kendo-theme-bootstrap/dist/all.css';\n\nexport default class App extends Component {\n\n  render() {\n    return (\n        <React.Fragment>\n          <div className=\"vessels-app\">\n            <div className=\"container\">\n              <div className=\"row\">\n                <div className=\"col-md-12\">\n                  <FleetList />\n                </div>\n              </div>\n            </div>\n          </div>\n        </React.Fragment>\n    );\n  }\n}\n","import SearchPanel from \"./search-panel\"\r\n\r\nexport default SearchPanel;","import React, { Component } from \"react\";\r\n\r\nexport default class SearchPanel extends Component {\r\n  state = {\r\n    termName: \"\",\r\n    termMMSI: \"\",\r\n    termFlag: \"\"\r\n  };\r\n\r\n  constructor() \r\n  {\r\n      super();\r\n      this.refName = React.createRef();\r\n      this.refMMSI = React.createRef();\r\n      this.refFlag = React.createRef();\r\n  }\r\n\r\n  onSearchChangeName = (e) => {\r\n    const term = e.target.value;\r\n    this.setState({termName: term });\r\n    this.props.onSearchChangeName(term);\r\n  };\r\n\r\n  onSearchChangeMMSI = (e) => {\r\n    const term = e.target.value;\r\n    this.setState({termMMSI: term });\r\n    this.props.onSearchChangeMMSI(term);\r\n  };\r\n\r\n  onSearchChangeFlag = (e) => {\r\n    const term = e.target.value;\r\n    this.setState({termFlag: term });\r\n    this.props.onSearchChangeFlag(term);\r\n  };\r\n\r\n  search = (e) =>\r\n  {\r\n    e.preventDefault();\r\n    debugger\r\n    let criteriaName = this.refName.current.value.trim();;      \r\n    this.props.onSearchChangeName(criteriaName);\r\n\r\n    let criteriaMMSI = this.refMMSI.current.value.trim();      \r\n    this.props.onSearchChangeMMSI(criteriaMMSI);\r\n\r\n    let criteriaFlag = this.refFlag.current.value.trim();      \r\n    this.props.onSearchChangeFlag(criteriaFlag);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-3\">\r\n          <label htmlFor=\"name\">Search By Name: </label> \r\n          <input\r\n            ref={this.refName}\r\n            id=\"name\"\r\n            className=\"form-control search-input\"\r\n            placeholder=\"Type to search name\"\r\n            value={this.state.termName}\r\n            onChange={this.onSearchChangeName}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"col-3\">\r\n        <label htmlFor=\"MMSI\">Search By MMSI: </label>   \r\n          <input\r\n            ref= {this.refMMSI}\r\n            id=\"MMSI\"\r\n            className=\"form-control search-input\"\r\n            placeholder=\"Type to search MMSI\"\r\n            value={this.state.termMMSI}\r\n            onChange={this.onSearchChangeMMSI}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"col-3\">\r\n        <label htmlFor=\"Flag\">Search By Flag: </label>   \r\n          <input\r\n            ref={this.refFlag}\r\n            id=\"Flag\"\r\n            className=\"form-control search-input\"\r\n            placeholder=\"type to search flag\"\r\n            value={this.state.termFlag}\r\n            onChange={this.onSearchChangeFlag}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"col-3\">\r\n          <button id=\"btnSeacrh\" type=\"button\" onClick={this.search} className=\"btn btn-primary\">Search</button>\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport {PureComponent} from 'react';\r\nimport {Marker} from 'react-map-gl';\r\n\r\nconst ICON = `M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\r\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\r\n  C20.1,15.8,20.2,15.8,20.2,15.7z`;\r\n\r\nconst SIZE = 20;\r\n\r\n// Important for perf: the markers never change, avoid rerender when the map viewport changes\r\nexport default class VesselsMap extends PureComponent {\r\n  render() {\r\n    const {data, onClick} = this.props;\r\n\r\n    return data.map((vessel, index) => (\r\n      <Marker key={`marker-${index}`} longitude={vessel.longitude} latitude={vessel.latitude}>\r\n        <svg\r\n          height={SIZE}\r\n          viewBox=\"0 0 24 24\"\r\n          style={{\r\n            cursor: 'pointer',\r\n            fill: '#d00',\r\n            stroke: 'none',\r\n            transform: `translate(${-SIZE / 2}px,${-SIZE}px)`\r\n          }}\r\n          onClick={() => onClick(vessel)}\r\n        >\r\n          <path d={ICON} />\r\n        </svg>\r\n      </Marker>\r\n    ));\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { PureComponent } from \"react\";\r\n\r\nexport default class VesselInfo extends PureComponent {\r\n  render() {\r\n    const { info } = this.props;\r\n    //const displayName = `${info.name}, ${info.flag}, ${info.mmsi}`;\r\n    const displayName = `${info.name}}`;\r\n    const displayFlag = `${info.flag}}`;\r\n    const displayMMSI = `${info.mmsi}}`;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"row\">\r\n          <div className=\"col-md-12\">Name:{displayName} | </div>\r\n        </div>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"col-md-12\">Flag:{displayFlag} | </div>\r\n        </div>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"col-md-12\">MMSI:{displayMMSI}</div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n\r\n  }\r\n}\r\n","import VesselList from \"./vessel-list\"\r\n\r\nexport default VesselList","import React, { Component } from \"react\";\r\n// import fleets from \"../../components/data/fleets.json\";\r\n// import vessels from \"../../components/data/vessels.json\";\r\nimport \"./vessel-list.css\";\r\nimport SearchPanel from \"../../components/search-panel\";\r\nimport FleetVesselService from \"./../../services/fleet-vessel-service\";\r\nimport { Link } from \"react-router-dom\";\r\nimport VesselsMap from \"./VesselsMap\";\r\nimport VesselInfo from \"./VesselInfo\";\r\n\r\nimport { Grid, GridColumn as Column } from \"@progress/kendo-react-grid\";\r\nimport { orderBy } from \"@progress/kendo-data-query\";\r\n\r\nimport MapGL, { Popup } from \"react-map-gl\";\r\n\r\nconst MAPBOX_TOKEN =\r\n  \"pk.eyJ1IjoiZmxlaWRtb3MiLCJhIjoiY2tobnJpemQxMDRrczMxcGU3ejZyMHB5aCJ9.Q3Tt5vnPUBzwOmoT2wpyJA\"; // Set your mapbox token here\r\n\r\nexport default class VesselList extends Component {\r\n  _apiBase = \"http://localhost:9000/testAPI/\";\r\n\r\n  fleetVesselService = new FleetVesselService();\r\n\r\n  state = {\r\n    viewport: {\r\n      latitude: 37.8,\r\n      longitude: -122.4,\r\n      zoom: 14,\r\n      bearing: 0,\r\n      pitch: 0,\r\n    },\r\n    popupInfo: null,\r\n  };\r\n\r\n  state = {\r\n    sort: [\r\n      { field: \"id\", dir: \"asc\" },\r\n      { field: \"name\", dir: \"asc\" },\r\n      { field: \"mmsi\", dir: \"asc\" },\r\n      { field: \"flag\", dir: \"asc\" },\r\n    ],\r\n\r\n    fleet: {},\r\n    fleets: [],\r\n    vessels: [],\r\n    vesselLocations: [],\r\n    vesselLocationsMap: [],\r\n\r\n    loading: true,\r\n    error: false,\r\n\r\n    searchName: \"\",\r\n    searchMMSI: \"\",\r\n    searchFlag: \"\",\r\n  };\r\n\r\n  _onClickMarker = (city) => {\r\n    this.setState({ popupInfo: city });\r\n  };\r\n\r\n  _renderPopup() {\r\n    const { popupInfo } = this.state;\r\n\r\n    return (\r\n      popupInfo && (\r\n        <Popup\r\n          tipSize={5}\r\n          anchor=\"top\"\r\n          longitude={popupInfo.longitude}\r\n          latitude={popupInfo.latitude}\r\n          closeOnClick={false}\r\n          onClose={() => this.setState({ popupInfo: null })}\r\n        >\r\n          <VesselInfo info={popupInfo} />\r\n        </Popup>\r\n      )\r\n    );\r\n  }\r\n\r\n  onSearchChangeName = (search) => {\r\n    this.setState({ searchName: search });\r\n  };\r\n\r\n  onSearchChangeMMSI = (search) => {\r\n    this.setState({ searchMMSI: search });\r\n  };\r\n\r\n  onSearchChangeFlag = (search) => {\r\n    this.setState({ searchFlag: search });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setState({ loading: true });\r\n    this.getAllFleets();\r\n  }\r\n\r\n  getAllFleets = () => {\r\n    let url = \"fleets\";\r\n    fetch(`${this._apiBase}${url}`)\r\n      .then((response) => response.json())\r\n      .then(this.onFleetsLoaded)\r\n      .catch(this.onError);\r\n  };\r\n\r\n  onFleetsLoaded = (data) => {\r\n    debugger;\r\n    this.setState({\r\n      fleets: data,\r\n      loading: true,\r\n      error: false,\r\n    });\r\n\r\n    let id = this.props.match.params.id;\r\n    const item = data.find((x) => x._id === id);\r\n    this.setState({\r\n      fleet: item,\r\n      loading: true,\r\n      error: false,\r\n    });\r\n\r\n    this.getAllVessels();\r\n  };\r\n\r\n  getFleetsById = (id) => {\r\n    let url = \"fleet\";\r\n    fetch(`${this._apiBase}${url}/${id}`)\r\n      .then((response) => response.json())\r\n      .then(this.onFleetsByIdLoaded)\r\n      .catch(this.onError);\r\n  };\r\n\r\n  onFleetsByIdLoaded = (data) => {\r\n    this.setState({\r\n      fleet: data.Fleet,\r\n      loading: true,\r\n      error: false,\r\n    });\r\n  };\r\n\r\n  getAllVessels = () => {\r\n    let url = \"Vessels\";\r\n    fetch(`${this._apiBase}${url}`)\r\n      .then((response) => response.json())\r\n      .then(this.onVesselsLoaded)\r\n      .catch(this.onError);\r\n  };\r\n\r\n  onVesselsLoaded = (data) => {\r\n    this.setState({\r\n      vessels: data,\r\n      loading: true,\r\n      error: false,\r\n    });\r\n\r\n    this.getAllVesselLocations();\r\n  };\r\n\r\n  onError = (err) => {\r\n    this.setState({\r\n      error: true,\r\n      loading: true,\r\n    });\r\n  };\r\n\r\n  getAllVesselLocations = () => {\r\n    let url = \"vesselLocations\";\r\n    fetch(`${this._apiBase}${url}`)\r\n      .then((response) => response.json())\r\n      .then(this.onVesselLocationsLoaded)\r\n      .catch(this.onError);\r\n  };\r\n\r\n  removeNull(array) {\r\n    return array.filter((x) => x !== null);\r\n  }\r\n\r\n  onVesselLocationsLoaded = (data) => {\r\n    let vessels = this.state.fleet.vessels;\r\n\r\n    const vesselLocationsByFleet = data.VesselLocations.map((item) => {\r\n      let id = item._id;\r\n      let vesselItem = vessels.filter((vessel) => vessel._id === id);\r\n      if (vesselItem && vesselItem.length > 0) return item;\r\n      else return null;\r\n    });\r\n\r\n    this.setState({\r\n      vesselLocations: this.removeNull(vesselLocationsByFleet),\r\n      loading: true,\r\n      error: false,\r\n    });\r\n\r\n    this.getVesselLocationsMap();\r\n  };\r\n\r\n  getVesselLocationsMap = () => {\r\n    const vesselLocationsMap = this.state.vesselLocations.map(\r\n      (vesselLocationItem) => {\r\n        let id = vesselLocationItem._id;\r\n        let lastpos = vesselLocationItem.lastpos;\r\n        let longitude = lastpos.geometry.coordinates[0];\r\n        let latitude = lastpos.geometry.coordinates[1];\r\n\r\n        let name = \"\";\r\n        let flag = \"\";\r\n        let mmsi = \";\";\r\n        let vessel = this.state.vessels.Vessels.find((x) => x._id === id);\r\n        if (vessel) {\r\n          name = vessel.name;\r\n          flag = vessel.flag;\r\n          mmsi = vessel.mmsi;\r\n        }\r\n\r\n        const obj = {\r\n          id: id,\r\n          latitude: latitude,\r\n          longitude: longitude,\r\n          name: name,\r\n          flag: flag,\r\n          mmsi: mmsi,\r\n        };\r\n        return obj;\r\n      }\r\n    );\r\n\r\n    this.setState({\r\n      vesselLocationsMap: vesselLocationsMap,\r\n      loading: false,\r\n      error: false,\r\n    });\r\n  };\r\n  \r\n  render() {\r\n    const { searchName, searchMMSI, searchFlag } = this.state;\r\n    const {\r\n      fleet,\r\n      vessels,\r\n      loading,\r\n      error,\r\n      vesselLocationsMap,\r\n    } = this.state;\r\n\r\n    if (loading) {\r\n      return <p>Loading ...</p>;\r\n    }\r\n\r\n    const hasData = !(loading || error);\r\n\r\n    // here\r\n\r\n    let vesselsByFleet = this.state.fleet.vessels;\r\n\r\n    debugger;\r\n    let itemsGrid = vesselsByFleet.map((item) => {\r\n      let vesselItem = vessels.Vessels.filter((x) => x._id === item._id);\r\n      let chkName =\r\n        vesselItem && vesselItem[0] && vesselItem[0].name\r\n          ? vesselItem[0].name\r\n              .toLowerCase()\r\n              .includes(searchName.toLowerCase())\r\n          : false;\r\n      let chkMMSI =\r\n        vesselItem && vesselItem[0] && vesselItem[0].mmsi\r\n          ? vesselItem[0].mmsi\r\n              .toString()\r\n              .toLowerCase()\r\n              .includes(searchMMSI.toLowerCase())\r\n          : false;\r\n      let chkFlag =\r\n        vesselItem && vesselItem[0] && vesselItem[0].flag\r\n          ? vesselItem[0].flag\r\n              .toLowerCase()\r\n              .includes(searchFlag.toLowerCase())\r\n          : false;\r\n\r\n      const results =\r\n        chkName && chkMMSI && chkFlag\r\n          ? {\r\n              id: vesselItem[0]._id,\r\n              name: vesselItem[0].name,\r\n              mmsi: vesselItem[0].mmsi,\r\n              flag: vesselItem[0].flag,\r\n            }\r\n          : null;\r\n\r\n      return results;\r\n    });\r\n\r\n    itemsGrid = this.removeNull(itemsGrid);\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"container\">\r\n          <h1>Vessels Page</h1>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <Link to=\"/fleets\">Back to Fleets</Link>{\" \"}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <h3>{fleet.name}</h3>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <div className=\"top-panel d-flex\">\r\n                <SearchPanel\r\n                  onSearchChangeName={this.onSearchChangeName}\r\n                  onSearchChangeMMSI={this.onSearchChangeMMSI}\r\n                  onSearchChangeFlag={this.onSearchChangeFlag}\r\n                />\r\n              </div>\r\n\r\n              <Grid\r\n                style={{ height: \"250px\" }}\r\n                data={orderBy(itemsGrid, this.state.sort)}\r\n                sortable\r\n                sort={this.state.sort}\r\n                onSortChange={(e) => {\r\n                  this.setState({\r\n                    sort: e.sort,\r\n                  });\r\n                }}\r\n              >\r\n                <Column field=\"id\" title=\"Id\" width=\"250px\" />\r\n                <Column field=\"name\" title=\"Name\" width=\"200px\" />\r\n                <Column field=\"mmsi\" title=\"MMSI\" width=\"200px\" />\r\n                <Column field=\"flag\" title=\"Flag\" width=\"200px\" />\r\n              </Grid>\r\n\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <MapGL\r\n                {...this.state.viewport}\r\n                width=\"100vw\"\r\n                height=\"100vh\"\r\n                mapStyle=\"mapbox://styles/mapbox/dark-v9\"\r\n                onViewportChange={(viewport) => this.setState({ viewport })}\r\n                mapboxApiAccessToken={MAPBOX_TOKEN}\r\n              >\r\n                <VesselsMap\r\n                  data={vesselLocationsMap}\r\n                  onClick={this._onClickMarker}\r\n                />\r\n                {this._renderPopup()}\r\n              </MapGL>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\n\nimport App from './App';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport FleetList from \"./components/fleet-list\";\nimport VesselList from \"./components/vessel-list\";\n\nReactDOM.render(\n  <React.StrictMode>\n    {/* <App /> */}\n    <Router>\n    <Switch>\n          <Route exact path=\"/\" component={App} />\n          <Route path=\"/fleets\" component={FleetList} />\n          <Route path=\"/vessels/:id\" component={VesselList} />\n        </Switch>\n      </Router>\n\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}